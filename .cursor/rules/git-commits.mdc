---
description: Git commit message format, required trailers (tools, models, agent), and signing
alwaysApply: true
---

# Git Commit Rules

When creating a new commit (at the user's request), follow these rules.

## Commit Signing (Mandatory)

Every commit **must** be signed. Use the `-S` or `--gpg-sign` flag when committing:

```bash
git commit -S -m "Subject

Body with trailers..."
```

If creating commits via scripts, rebase, or filter-branch, ensure the resulting commits are signed (e.g. `git rebase --exec 'git commit --amend --no-edit -S'` for rewriting).

Verify signing with `git log -1 --show-signature`. The output should show "Good signature".

## Commit Message Format (Best Practices)

- **Subject line**: 50 characters or less. Use imperative mood ("Add feature" not "Added feature"). Capitalize and omit trailing period.
- **Blank line**: Exactly one blank line between subject and body.
- **Body**: Wrap at 72 characters. Explain what and why, not just how.
- **No merge/Squash-style prefixes** in the subject unless the project convention requires it (e.g. no "WIP:", "fix:" unless agreed).

Example:

```
Add validation for kustomization names

Reject empty or invalid names before rendering to avoid confusing
errors in the graph. Validation runs on load and on name change.
```

## Required Trailers (Mandatory)

After the body, add a blank line, then these trailers **in order**. All are required.

1. **Tool** — One line, e.g. `Tool: Cursor`
2. **Models** — One or more model names, e.g. `Models: claude-sonnet-4`
3. **AI agent(s)** — The agent or assistant used, e.g. `AI agent(s): Composer (Cursor)`

Example:

```
Tool: Cursor
Models: claude-sonnet-4
AI agent(s): Composer (Cursor)
```

4. **Co-author for Cursor**  
   Add a standard Git co-author trailer so Cursor is credited:

   ```
   Co-authored-by: Cursor <cursor@cursor.com>
   ```

   If the project or user uses a different Cursor co-author identity (name/email), use that instead.

## Full Example

```
Add validation for kustomization names

Reject empty or invalid names before rendering to avoid confusing
errors in the graph. Validation runs on load and on name change.

Tool: Cursor
Models: claude-sonnet-4
AI agent(s): Composer (Cursor)

Co-authored-by: Cursor <cursor@cursor.com>
```

## Checklist Before Committing

- [ ] **Signed**: `-S` flag used; `git log -1 --show-signature` shows "Good signature"
- [ ] Subject ≤ 50 characters, imperative, capitalized, no trailing period
- [ ] Single blank line between subject and body
- [ ] Body wrapped at 72 characters
- [ ] **Trailers (all required)**: `Tool:`, `Models:`, `AI agent(s):`, then `Co-authored-by: Cursor <cursor@cursor.com>` at the very end
